function initializeGame(){function e(){C.font="20px Enriqueta",C.fillStyle="black",C.fillText("High Score: "+B,10,30)}function t(){C.font="20px Enriqueta",C.fillStyle="black",C.fillText("Score: "+S,10,60)}function n(){S>B&&(B=S,localStorage.setItem("highScore",B))}function o(){w++,w>=L&&(S++,w=0)}function i(){for(let e of j)if(b.x<e.x+e.width&&b.x+b.width>e.x&&b.y<e.y+e.height&&b.y+b.height>e.y)return l(),!0;return!1}function l(){h.style.display="block",pauseAudio();const e=document.getElementById("finalScore");e.textContent=S,cancelAnimationFrame(p)}function c(){if(Math.random()<.02){const e={x:r.width,y:r.height-20-b.height,width:50,height:50,speed:5};j.push(e)}}function a(){b.jumping?(b.y-=b.jumpVelocity,b.jumpVelocity-=.5,b.jumpVelocity<=0&&(b.jumping=!1)):b.y<r.height-b.height?(b.y+=b.jumpVelocity,b.jumpVelocity+=.5):b.jumps=0}function d(){C.fillStyle="blue",C.fillRect(b.x,b.y,b.width,b.height)}function s(){Math.random()<=.5&&c();for(let e=0;e<j.length;e++)j[e].x-=j[e].speed,j[e].x+j[e].width<0&&j.splice(e,1)}function u(){location.reload()}function m(){C.fillStyle="red";for(let e of j)C.fillRect(e.x,e.y,e.width,e.height)}function p(){C.clearRect(0,0,r.width,r.height),a(),s(),n(),o();const c=Math.floor(S/60);if(b.speed+=1*c,j.forEach(e=>{e.speed+=.001*c}),L=Math.max(5,L-.1*c),d(),m(),e(),t(),i())return console.log("Collision detected!"),void l();requestAnimationFrame(p)}const r=document.createElement("canvas");r.id="gameCanvas",r.width=800,r.height=400,document.body.appendChild(r);const h=document.createElement("div");h.classList.add("backdrop"),h.id="gameOverModal",h.style.display="none",document.body.appendChild(h);const y=document.createElement("div");y.classList.add("modal"),h.appendChild(y);const f=document.createElement("div");f.classList.add("modal-content"),y.appendChild(f);const g=document.createElement("span");g.classList.add("close"),g.innerHTML="&times;",f.appendChild(g);const v=document.createElement("h2");v.textContent="Game Over",f.appendChild(v);const x=document.createElement("p");x.innerHTML="Your score: <span id='finalScore'>0</span>",f.appendChild(x);const E=document.createElement("button");E.id="restartButton",E.textContent="Restart Game",f.appendChild(E);const C=r.getContext("2d");playAudio();const b={x:50,y:r.height-50,width:30,height:30,speed:5,jumping:!1,jumpHeight:150,jumpVelocity:10,maxJumps:2,jumps:0};let j=[],S=0,w=0,L=20,B=localStorage.getItem("highScore")||0;E.addEventListener("click",u),g.addEventListener("click",function(){h.style.display="none"}),document.addEventListener("keydown",function(e){"Space"===e.code&&b.jumps<b.maxJumps&&(b.jumping=!0,b.jumpVelocity=b.jumpHeight/10,b.jumps++)}),p()}function playAudio(){audio.play()}function pauseAudio(){audio.pause()}const versionInfo={number:"2.0.0 (Final Release)",position:{bottom:"10px",right:"10px"},color:"#666"},versionElement=document.createElement("p");versionElement.textContent="Version: "+versionInfo.number,versionElement.style.position="absolute",versionElement.style.bottom=versionInfo.position.bottom,versionElement.style.right=versionInfo.position.right,versionElement.style.color=versionInfo.color,document.body.appendChild(versionElement);const playButton=document.createElement("button");playButton.textContent="Play",playButton.id="playButton",document.body.appendChild(playButton),playButton.addEventListener("click",function(){playButton.remove(),initializeGame()});const audio=new Audio("game_music.mp3");audio.loop=!0,audio.volume=.5;
